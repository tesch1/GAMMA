###############################################################################
#                                                                             #
#                     Makefile For A GAMMA Source Module                      #
#                      Copyright © 2000 Scott A. Smith                        #
#                  National High Magnetic Field Laboratory                    #
#                         1800 E. Paul Dirac Drive                            #
#                     Tallahassee, FL, USA 32306-4005                         #
#                          ssmith@magnet.fsu.edu                              #
#                      On WWW See gamma.magnet.fsu.edu                        #
#                                                                             #
# =========================================================================== #
#                                                                             #
# Quick Info: 1.) GAMMA Source Module Generic Makefile.                       #
#             2.) This Makefile in identical for each GAMMA source module.    #
#             3.) Recursively called from the GAMMA main makefile per module. #
#             4.) This file is a copy of $GAMMAVER/src/make/MakefileBP	      #
#             5.) To update this file use "make srcmakes" from $GAMMAVER      #
#             6.) The target srcmakes is located in MakeModSrc                #
#                                                                             #
# =========================================================================== #
#                                                                             #
#          Automatically Generated From $GAMMAVER/make/MakeModsSrc!           #
#          -----------------------------------------------------              #
#                                                                             #
#          For Global Alterations Change $GAMMA/make/MakeModsSrc.             #
#          For Module Specifc Alterations Change ./MakeDefs.                  #
#                                                                             #
# This Makefile is intended to be called recursively from the main GAMMA      #
# makefile, $GAMMAVER/Makefile.  It's purpose is to handle compilation and    #
# distribution of files in this GAMMA module. This file should reside in      #
# the source module directory stemming off of the GAMMA source directory,     #
# $GAMMAVER/src. It will NOT be different from any other GAMMA source module  #
# Makefile. Module specifics are imported in, as are common segements shared  #
# by all module Makefiles.                                                    #
#                                                                             #
#    IT IS UNLIKELY YOU WOULD EVER NEED TO MAKE CHANGES IN THIS FILE!         #
#             SPECIFICS FOR THIS FILE ARE FOUND IN MakeDefs                   #  
#                                                                             #
# All module specifics are included in the local file MakeDefs, e.g. the file #
# $GAMMAVER/src/Basics/MakeDefs contains specific about the Basics module.    #
# If any changes are needed for this specific module change the local file    #
# ./MakeDefs. If any changes are required for the Makfile targets change the  #
# appropriate segments in the included Makefile(s) found in $GAMMAVER/make    #
# so that they will apply to all module Makefiles. As for this Makefile, you  #
# should NEVER change it because it is just a copy of the generic makefile    #
# $GAMAMVER/make/MakeModSrcBP. Change that file instead.                      # 
#                                                                             #
# The primary targets provided by this makefile are:                          #  
#                                                                             #
# all:     This is the 1st (default) target to build the module from sources. #
#          A library for this module will be generated through source code    #
#          compilation.                                                       #
# profile: This target builds the module from sources with the profiling. It  #
#          is similar to the above target except that generated binaries will #
#          contain additional information that enables programs to be run     #
#          with profiling turned on.                                          #
# force:    Dummy target to insure a target is run.                           #
# srcdist: Copies source distribution files to a temporary directory. If not  #
#          run recursively (from the main GAMMA Makefile) will tar and zip    #
#          these files into a package for distribution.                       #  
# srcvars: Output all variables relevant to using this makefile to screen.    #
#          This is done in a nicely formatted manner and useful in Makefile   #
#          debugging. Most GAMMA users will not wish to use this.             #  
# bindist: Target. Distributes files define in $(HFILES) and $(SUPPF)         #
#                                                                             #
# Users are free to copy this file for personal use but may NOT give out      #
# modifications with or without the GAMMA platform.  This GAMMA module's      #
# source distrubution is typically packaged with the full GAMMA source        #
# distribution.  The full src distrubution and one for just this module may   #
# be obtained from the GAMMA WWW site above or any of its mirrors.            #
#                                                                             #
###############################################################################

###############################################################################
###############################################################################
#                                                                             #
#                                 VARIABLES                                   #
#                                                                             #
###############################################################################
###############################################################################

GAMBASEVER    = 4
GAMSUBVER     = 1
GAMSUBSUBVER  = 0
GVERSION      = $(GAMBASEVER).$(GAMSUBVER).$(GAMSUBSUBVER)
GVERDIR       = gamma-$(GVERSION)
MODLABEL      = GAMMA $(DIRNAME)
MODLABUN      = ------$(DIRNAMEUL)
BASENAME      = $(DIRNAME)Src
RCSSCR        = $(DIRNAME)RCS
LIBNAME       = lib$(LIBBASE).a 
LIBNAMEP      = lib$(LIBBASE)_p.a
NOTSOLO       = ""
PASSFLGS      = ""
NPD           = --no-print-directory                                            
SRCDIR        = src
TARPGM        = tar
TARFLGS       = cf
GZIPPGM       = gzip
GZIPFLGS      =  
ZIPPGM        = pkzip
ZIPFLGS       = -p -r
MODULEDIR     = $(shell pwd)
COPY2BASE     = ./$(GVERDIR)
SRCMAKEDIR    = ../make
MAINMAKEDIR    = ../../make

###############################################################################
#                                                                             #
#                         Definition Of GAMMA Sources                         #
#                                                                             #
# The following included file defines what constitutes GAMMA sources. It is   #
# the variables set in that file dictate what files are associated with each  #
# source module and what files from these modules are included in GAMMA	      #
# distributions. If new files and/or modules are added into GAMMA they MUST   #
# be placed into the file inlcuded below. The file does NOT supply any make   #
# targets, only variable definitions. Here are some definitions it supplies,  #
# particularly those of concern to this Makefile:                             #
#                                                                             #
# (MODNAME)      = Name of module (e.g.  BASICS, MATRIX,...)                  #
# (MODNAME)UL    = String for cosmetic use when running the makefile.         #
# (MODNAME)BASE  = Base names of module sources (e.g. complex, _matrix, ...)  #
# (MODNAME)HDR   = Names of module main inlcude file (e.g. matrixIF.h)        #
# (MODNAME)PY    = Names of PyGAMMA header files (e.g. PyMatrix.h)            #
#                                                                             #
# After this file is included, this Makefile will have knowledge about all    #
# files in all of the GAMMA source module directories. This allows us to set  #
# up any variables needed by make targets that will compile, distribute,      #
# clean, etc... the source module files.                                      #
#                                                                             #
# Note: Currently this is commented out because it is incuded by each source  #
#       modules file named MakeDefs. Thus it is essentially included in the   #
#       next section anyway.                                                  #
#                                                                             #
# Requirements: none                                                          #
#                                                                             #
###############################################################################

#include ${SRCMAKEDIR}/Modules

###############################################################################
#                                                                             #
#                     Definition Of First Makefile Target 		      #
#                                                                             #
# The Makefile for a particular GAMMA source modules is meant to be used from #
# the main GAMMA Makefile in a recursive fashion. Nevertheless, there are     #
# targets that can be useful to run directly from this directory. The simple  #
# command "make" is perhaps one of them, but what should that do? Compile the #
# module, or distribute, or....? Since this aspect is not crystal clear when  #
# run from this directory, I set a simple target as the first one encountered #
# so the user gets a description of the module and what the makefile herein   #
# can be used for. Recall that the first target is that which is run when the #
# command "make" is executed.                                                 #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
#   firsttarget:   First target in a GAMMA source module Makefile.            #
#   preamble:      Intital text written when firsttarget is run.              #
#   postable:      Final text written when firsttarget is run.                #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# MAKE           Make program being used (automatically set)                  #
# MAKELEVEL      Make level, recursive (automatically set)                    #
# NPD            No print directory directive                                 #
# LIBBASE:       Source module base name.                                     #
# MODULEDIR:     Directory name of the source module.                         #
# allblurb:      Target outputting text about a particular source module.     #
#                                                                             #
###############################################################################

include $(SRCMAKEDIR)/FirstTarg

###############################################################################
#                                                                             #
#                            Module Specific Definitons                       # 
#                                                                             #
# The following included "Makefile" controls GAMMA module specifics. It is in #
# this file where anything specific to the module in this directory is to be  #
# specified. Whereas the previous include defines what constitutes GAMMA      #
# source files, this include will distill those definitions down to a few     #
# varaibles that are specific to one particular source module, the one in     #
# this directory. The variables that it will provide are listed below, it     #
# should supply NO targets.                                                   #
#                                                                             #
# LIBBASE   - Base Name of Module Library (e.g. BASICS, MATRIX, ....)         #
# DIRNAME   - The Local Directory Name  (e.g. Basics, Matrix, ....)           #
# DIRNAMEUL - Cosmetic Underline Of Local Directory Name                      #
# FNAMES    - Base Names of Source/Header Files in The Module. Thus All The   #
#             Module Source Code to Be Compiled Are in $(FNAMES).cc And Their #
#             Associated Interface Files $(FNAMES).h.  The Resulting Object   #
#             Files Will Be Something Like $(FNAMES).o.                       #
# HDRFILE   - Single header that includes all module headers (e.g BasicsIF.h) #
# PyGFILE   - Single header that includes all PyGAMMA info (e.g PyBasics.h)   #
# allblurb: - Target for output during makes of what the module provides.     #
#                                                                             #
# Note that most of the varibles included here stem from settings in the file #
# ../make/MakeMods, any module specific alterations/additions will occur      #
# in ./Modules. This appeases both the generic module makefiles (this file)   #
# and the large GAMMA makefile $GAMMA/Makefile.                               #
#                                                                             #
# The included file, ./MakeDefs, requires that ../make/Modules exists & that  #
# target "force" is present somewhere in this Makefile.			      #
#                                                                             #
# Requirements: ./MakeDefs ../make/Modules force:                             #
#                                                                             #
###############################################################################

include ./MakeDefs

###############################################################################
#                                                                             #
#                         Non-Specific Module Definitions                     #
#                                                                             #
# These are generated from the variables defined in ./ModDefs. The ones used  #
# in this section taken from ./ModDefs are                                    #
#                                                                             #
# FNAMES    - Base Names Of Module Source/Header Files            (./ModDefs) #
# SRCLOCAL  - Base Directory Of Module Source/Header Files                    #
# DIRNAMEUL - Cosmetic Underline Of Local Directory Name          (./ModDefs) #
# LIBBASE   - The Base Name of the Module Library                 (./ModDefs) #
#                                                                             #
# The variables set in this section are as follows:                           #
#                                                                             #
# MODLABEL - This Modules Label for Output                                    #
# MODLABUN - This Modules Label Output Underlining                            #
# BASENAME - Base Name Of Output File(s) To Be Produced                       #
# RCSSCR   - Script That Maintains The Module Via RCS                         #
# LIBNAME  - Module Static Library Name                                       #
# LIBNAMEP - Module Static Library With Profiling Name                        #
#                                                                             #
# Requirements: ./MakeDefs DIRNAME SRCLOCAL DIRNAMUL LIBBASE                  #
#                                                                             #
###############################################################################

MODCCFILES    = $(addsuffix .cc, $(addprefix $(SRCLOCAL)/, $(FNAMES)))
MODHFILES     = $(addsuffix .h,  $(addprefix $(SRCLOCAL)/, $(FNAMES)))
MODDEFFILE    = $(addprefix $(SRCLOCAL)/, MakeDefs)
MODMAKEFILE   = $(addprefix $(SRCLOCAL)/, Makefile)
MODHSUMFILE   = $(addprefix $(SRCLOCAL)/, $(HDRFILE))
MODPYGFILE    = $(addprefix $(SRCLOCAL)/, $(PYGFILE))
MODSRCFILES   = $(MODCCFILES) $(MODHFILES) $(MODMAKEFILE) $(MODDEFFILE) $(MODHSUMFILE) $(MODPYGFILE)
MODHDRFILES   = $(MODHFILES) $(MODMAKEFILE) $(MODDEFFILE) $(MODHSUMFILE) $(MODPYGFILE)
MODDISTFILES  = ${MODSRCFILES} ${MODHDRFILES}
DOSCLEANFILES = ${MODDISTFILES}
UPDATEFILES   = 
UPDATEDIRS    = 

###############################################################################
#                                                                             #
# Start with an included Makefile that sets up the typically GNU boiler-plate #
# definitions (srcdir, prefix, bindir, libdir, infodir, mandir, host,....).   #
# This will also set up standard SUFFIXES and the SHELL variable. Compiler    #
# flags will be set herein too. These are as follows:                         #
#                                                                             #
# .SUFFIXES - Clears out any implicit make rules that might be present        #
# .SUFFIXES - Adds back in implicit make rules that we might want to use      #
# SHELL     - Don't want SHELL variable inherited from environment (want sh)  #
# CXX      - The C++ Compiler To Be Used                                      #
# CXXFLAGS - The C++ Compiler Flags To Be Used                                #
# RANLIB    - The ranlib program to use.  Set as RANLIB = : if not required.  #
# GCXXFLAGS - Additonal C++ Compiler Flags That GAMMA Uses                    #
# SRCLOCAL  - Local module source directory                                   #
#                                                                             #
# Note that ../MakeGen is generated from a typical Gnu configuration from the #
# file ../MakeGen.in.  This is done when "./configure" is run from the base   #
# GAMMA directory for the current GAMMA version.                              #
#                                                                             #
###############################################################################

include ${MAINMAKEDIR}/MakeModGen

###############################################################################
#                                                                             #
#                            Files Under Make Control                         #
#                                                                             #
# Below are the module specific files that this Makefile deals with.  There   #
# are two essential points to understanding this section.  First, the local   #
# file ./ModDefs will contain the variable FNAMES. It is therein that sets    #
# up base names of the source & header files associate with specific modules. #
# Second, the file ../MakeFiles will expand upon the FNAMES variable and      #
# construct additonal variables that, when used in different generic targes,  #
# cause the target to deal with files specific to a particular GAMMA module.  #
#                                                                             #
# Thus, change variable FNAMES in ./MakeDefs to affect the particular module  #
# being dealt with.  Change ../MakeFiles to change any definitions to be used #
# which are based on FNAMES.                                                  #
#                                                                             #
# Here are the current definitions:                                           #
#                                                                             #
# FNAMES: "filename" where filename.h & filename.cc are souce code files that #
#         are part of this module.  These will be compiled into the module    #
#         library.                                                            #
# BINSUPP:Supplementary files to be included in the binary distrubution.      #
# SUPPF:  Supplementary files to be include in the source distrubution.       #
# FILES:  These are automatically formed  herein from the base filenames set  #
#         in FNAMES. The are the source interface and implementation files.   #
# OBJ:    These are automatically formed herein from the base filenames set   #
#         in FNAMES. The are the object file names after source compilation.  #
#         Note that unlike the names in FILES, these will contain the full    #
#         GAMMA library path.                                                 #
# OBJP:   Same as OBJ but used when profiling.                                #
#                                                                             #
# Note that the files defined by FNAMES.h should also be represented in the   #
# module header file called HDRFILE as well as in the RCS control script      #
# RCSSCR. The former will affect how GAMMA generally takes this package       #
# whereas the latter helps to maintain these files (but does not affect GAMMA #
# program directly.)                                                          #
#                                                                             #
###############################################################################

include ${MAINMAKEDIR}/MakeModFiles

###############################################################################
#                                                                             #
# The next included Makefile is concerned with building GAMMA libraries from  #
# object files and, in turn, building GAMMA object files from source code.    #
# The following patterns will be defined herein:                              #
#                                                                             #
# $(LIB)/file.o      <-- $(SRCLOCAL)/file.cc   - Object files from cc files   #
# $(LIB)/file_p.o    <-- $(SRCLOCAL)/file.cc   - Same as above with profiling #
# $(LIB)/$(LIBNAME)  <-- $(LIB)/{file.o}       - Library from object files    #
# $(LIB)/$(LIBNAMEP) <-- $(LIB)/{file_p.o      - Same as above with profiling #
#                                                                             #
# Targets included in the Makefile are as follows:                            #
#                                                                             #
# all:      This is the 1st (default) target to build GAMMA from sources.     #
# profile:  This is the target to build GAMMA from sources with profiling.    #
# force:    Dummy target to insure a target is run.                           #
# clean:    Target to both object and source files.                           #
# cleanobj: Target to clean just object files.                                #
#                                                                             #
###############################################################################

include ${MAINMAKEDIR}/MakeModTarg

###############################################################################
###############################################################################
#                                                                             #
#                                TARGETS                                      #
#                                                                             #
###############################################################################
###############################################################################

###############################################################################
#                                                                             #
#                     Source Compilation and Library Builds                   #
#                                                                             #
# The following included Makefile controls compilation of GAMMA source codes  #
# for a single GAMMA module. These may be subsequently linked into a single   #
# module library if desired, or left to be included into a global GAMMA       #
# library. The latter is controlled from the GAMMA makefile MakeBuild found   #
# in the $GAMMA/make directory.                                               #
#                                                                             #
# Required Variables (MUST Be Defined Herein):                                #
# ============================================                                #
#                                                                             #
# FNAMES    The base name of all module source files.  ./MakeDef              #
# MODULEDIR The full name of the module directory.     Internal from pwd      #
# LIB       Directory where binaries will be placed.   $(GAMMA)/make/MakeGam  #
# CXX       Command to invoke C++ compiler.            $(GAMMA)/make/MakeGen  #
# C++FLAGS  Flags used when invoking the C++ compiler. $(GAMMA)/make/MakeGen  #
# MTRACK    Flag if makefile tracking desired.         $(GAMMA)/make/MakeGen  #
# AR        Archiving program for building libraries.  $(GAMMA)/make/MakeGen  #
# ARFLAGS:  Archiving program flags.                   $(GAMMA)/make/MakeGen  #
# LIBNAME:  Name of lib. to be built from .o files     Internal from LIBBASE  #
# LIBNAMEP: Name of lib. to be built from _p.o files   Internal from LIBBASE  #
#                                                                             #
# Supplied Patterns:                                                          #
# ==================                                                          #
#                                                                             #
# $(LIB)/file.o      <-- $(MODULEDIR)/file.cc  - Object files from cc files   #
# $(LIB)/file_p.o    <-- $(MODULEDIR)/file.cc  - Same as above with profiling #
# $(LIB)/$(LIBNAME)  <-- $(LIB)/{file.o}       - Library from object files    #
# $(LIB)/$(LIBNAMEP) <-- $(LIB)/{file_p.o}     - Same as above with profiling #
#                                                                             #
# Supplied Targets:                                                           #
# =================                                                           #
#                                                                             #
# buildvars - Write out the variables used in source/header distributions.    #
#                                                                             #
###############################################################################

include ${MAINMAKEDIR}/MakeModBuild

###############################################################################
#                                                                             #
#                         Source & Header Distributions                       #
#                                                                             #
# The following included Makefile controls GAMMA source code distributions.   #
# Typically GAMMA sources are copied to a temporary directory, compressed     #
# into a single file, then moved to a release location. If running SOLO then  #
# modules sources/headers are copied in the temporary location, packaged into #
# a single file, and then the copied files deleted. If running NONSOLO then   #
# it is assumed that the Makefile is running recursively and only the module  #
# sources/headers are copied into a temporary location.  In this case it is   #
# up to the make recursing into the module Makefile to do packaging and and   #
# temporary file deletions. Targets supplied here exist to release the full   #
# sources or just the headers. Variations allow for the packaged release to   #
# be in Windows-like zip format or Unix-like tar.gz form (when run SOLO).     #
#                                                                             #
# Required Variables (MUST Be Defined Herein):                                #
# ============================================                                #
#                                                                             #
# NOTSOLO     Controls if targets run recursively (NOTSOLO) or not.           #
# NPD         Direct print supression flag (--no-print-directory).  This will #
#             be defined in the generic file $GAMMAVER/$MAKE/MakeGam but that #
#             definition will only be used when running NONSOLO.  If SOLO the #
#             definition of NPD will stem from the definition in this file.   #
# MODLABEL    Module Name. Used for output to screen when make runs.          #
# MODLABEL    This Modules Labe Underlining for Output                        #
# MODULEDIR   Name of module directory to be copied.                          #  
# COPY2BASE   Base name of the distribution directory. This should be passed  #
#             into the Makefile when being run recursively (NONSOLO) in the   #
#             $PASSFLAGS variable.  It will be defined below as "." when the  #
#             make is run in SOLO mode.                                       #
# GVERDIR     Name of GAMMA version directory (gamma-4.0.7).                  #
# SRCDIR      Name of GAMMA source directory (src).                           #
# MODSRCFILES Source files that will be distributed with the module.          #  
# MODHDRFILES Header files that will be distributed with the module.          #  
# TARPGM      Tar program (usually tar). Used if SOLO & Unix style output.    #
# TARFLGS     Tar flags (ususally cf). Used if SOLO & Unix style output.      #
# GZIPPGM     Compression program (usually gzip). Works on TARFILE if running #
#             SOLO with Unix style output.                                    #  
# GZIPFLGS    Compression flags (usually nothing). Used when running SOLO     #
#             with Unix style output.                                         #
# ZIPPGM      Compression program that condenses distribution (pkzip or zip). #
#             Used when runnin SOLO with Windows style output.                #
# ZIPFLGS     Compression program flags. Used when running SOLO with Windows  #
#             style output (-p -r).                                           #
#                                                                             #
# Supplied Targets:                                                           #
# =================                                                           #
#                                                                             #
# srcdist  - Makes tar/gzipped file of all GAMMA module sources.  (SOLO)      #  
#          - Copies all modules sources to temporary directory.   (NONSOLO)   #
# hdrdist  - Makes tar/gzipped file of all GAMMA module headers.  (SOLO)      #  
#          - Copies all modules headers to temporary directory.   (NONSOLO)   #
# srcddist - Makes zipped file of all GAMMA module sources.       (SOLO)      #  
#          - Copies all modules sources to temporary directory.   (NONSOLO)   #
# hdrddist - Makes zipped file of all GAMMA module headers.       (SOLO)      #  
#          - Copies all modules headers to temporary directory.   (NONSOLO)   #
# srcvars  - Write out the variables used in source/header distributions.     #  
#                                                                             #
###############################################################################

SRCDIR        = src
DISTBASE      = ${CURDIR}/$(GVERDIR)
DISTSRC       = ${DISTBASE}/${SRCDIR}
DISTDIR       = ${DISTSRC}/make
PASSFLGS      =

DIRRCONTENTS = ${DIRNAME}
#${LIBBASE}
#MODLABEL    = ${LIBASE}
distdir: 
        ifeq (0,${MAKELEVEL})
	  @${MAKE} $(NPD) distdirsolo;
        else
	  @${MAKE} $(NPD) newdistdir;
        endif
distdirsolo:


#include ${SRCMAKEDIR}/Distribute

###############################################################################
#                                                                             #
#                             Binary Distributions                            #
#                                                                             #
# The following included Makefile controls GAMMA binary distributions.        #
# Typically GAMMA libraries and headers are copied to a temporary directory,  #
# compressed into a single file, then moved to a release location. The        #
# sources that are copies in the temporary location are subsequently deleted. #
#                                                                             #
# bindist     - Target. Distributes files define in $(HFILES) and $(SUPPF)    #
# NOTSOLO     - controls whether make runs recursively (cleans itself) or not #
# LABEL       - Used for output to screen when make runs                      #
# LABELUN     - Same as above.                                                #
# MODULEDIR   - GAMMA module actual directory                                 #
# LOCALMIRROR - Where the temporary files will be copied.                     #
# TARFILE     - Tarred file that will be created from sources                 #
# ZIPFILE     - Zip file that will be created from sources                    #
#                                                                             #
###############################################################################
 
include ${MAINMAKEDIR}/MakeModBin

# BUGS - The variable COPY2DIR is not setting the GAMMA Version properly.
# BUGS - Don't know yet about the variables section

###############################################################################
###############################################################################
###################  GAMMA Source Distribution Targets ########################
###############################################################################
###############################################################################

###############################################################################
#                                                                             #
#                             Source Distributions                            #
#                                                                             #
# The following included Makefile controls GAMMA source module source code    #
# distributions. In this case, this is probably one and the same as a full    #
# distribution of this module. The Source distribution will contain the files #
# needed for a build of the GAMMA module from source code.                    #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
#   srcdist:   Produce a tar.gz and a zip distribution of module sources.     #
#   srcgdist:  Produce a tar.gz distribution of module sources.               #
#   srcddist:   Produce a zip distribution of module sources.                 #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# MAKE           Make program being used (automatically set)                  #
# NPD            No print directory directive                                 #
# MODSRCFILES    Files to include in the distribution.                        #
# MODLABEL       Cosmetic label for the source module.                        #
# MODULEDIR      Directory name of the source module.                         #
# force:         Required target for use of this makefile                     #
# distdir:       Target to handle needed distribution directories.            #
# killdossrc:    Target needed to remove ^M from distributed files.           #
# copysrc:       Target which copies distributed files to dist. directory.    #
# srctar:        Target needed to tar all files distributed.                  #
# srczip:        Target needed to (GNU) compress tar of distributed files.    #
# srcdzip:       Target needed to (DOS) compress all files distributed.       #
# srcclean:      Target to remove temp files used in the distribution.        #
#                                                                             #
###############################################################################

#include ${SRCMAKEDIR}/SrcDist

###############################################################################
#                                                                             #
#                             Header Distributions                            #
#                                                                             #
# The following included Makefile controls GAMMA source module header file    #
# distributions. The header distribution will contain the files needed for    #
# binary distributions of GAMMA (e.g. a prebuilt library) where .cc files are #
# not needed. 					                              #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
#   hdrdist:   Produce a tar.gz and a zip distribution of module headers.     #
#   hdrgdist:  Produce a tar.gz distribution of module headers.               #
#   hdrddist:   Produce a zip distribution of module headers.                 #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# MAKE           Make program being used (automatically set)                  #
# NPD            No print directory directive                                 #
# MODSRCFILES    Files to include in the distribution.                        #
# MODLABEL       Cosmetic label for the source module.                        #
# MODULEDIR      Directory name of the source module.                         #
# force:         Required target for use of this makefile                     #
# distdir:       Target to handle needed distribution directories.            #
# killdossrc:    Target needed to remove ^M from distributed files.           #
# copysrc:       Target which copies distributed files to dist. directory.    #
# srctar:        Target needed to tar all files distributed.                  #
# srczip:        Target needed to (GNU) compress tar of distributed files.    #
# srcdzip:       Target needed to (DOS) compress all files distributed.       #
# srcclean:      Target to remove temp files used in the distribution.        #
#                                                                             #
###############################################################################

#include ${SRCMAKEDIR}/HdrDist

###############################################################################
#                                                                             #
#                          Directory File Copying                             #
#                       (Should NOT Be Called Directly)                       #
#                                                                             #
# This included Makefile contains targets which will copy files in this       #
# directory to a (pre-existing) file specifiedy by the variable COPY2DIR.     #
# Such targets are often used from GAMMA distribution targets. The targets    #
# here will NOT deal with any files that are not in this directory.           #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
#   copyall:    Copy all files in MODDISTFILES to directory COPY2DIR          #
#   copysrc:    Copy all files in MODSRCFILES to directory COPY2DIR           #
#   copyhdr:    Copy all files in MODHDRFILES to directory COPY2DIR           #
#   showcopy:   Show how copying is to be performed (but take no action)      #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# MODLABEL:      Cosmetic label for the source module.                        #
# MODULEDIR:     Directory name of the source module.                         #
# MODDISTFILES:  Files in this directory to copy.                             #
# MODSRCFILES:   Source files in this directory to copy.                      #
# MODHDRFILES:   Header files in this directory to copy.                      #
# COPY2DIR:      Directory name where copies will be put                      #
# force:         Required target for use of this makefile                     #
#                                                                             #
# Note: The Directory COPY2DIR MUST EXIST prior to calling any of these       #
#       targets, except showcopy. The task of producing this directory is     #
#       usually done by whatever target is producing a GAMMA distribution.    #
#                                                                             #
###############################################################################

#include ${SRCMAKEDIR}/CopyDir

###############################################################################
#                                                                             #
#                             Distributions                                   #
#                         (May Be Called Directly)                            #
#                                                                             #
# This included Makefile contains targets for creating a GAMMA distribution.  #
# This is normally invoked by the Main GAMMA Makefile, but it can be run from #
# this Makefile as well. When run in from the main Makefile it will add all   #
# files to be distributed into what the main Makefile is planning to to. If   #
# run directly, only GAMMA source directory files can be distributed.         #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
#   distribute:  Make a GAMMA distribution (Both Unix gz and PC zip files)    #
#   distributeg: Make a GAMMA distribution (Unix gz file only)                #
#   distributez: Make a GAMMA distribution (PC zip file only)                 #
#                                                                             #
# Supplied Variables                                                          #
# ==================                                                          #
#                                                                             #
# TARPGM        Program used to tar up directory TARDIR (tar)                 #
# TARFLGS       Flags used in conjunction with program TAR (cf)               #
# GZIPPGM       Program used to compress TARFILE (gzip)                       #
# GZIPFLGS      Flags used in conjunction with program GZIPPGM (none)         #
# ZIPPGM        Program used to zip up directory TARDIR (zip)                 #
# ZIPFLGS       Flags used in conjunctionwith program ZIPPGM (-r -q)          #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# MAKE:          Make program being used (automatic)                          #
# NPD:           No print directory directive (--no-print-directory)          #
# SUBDIRS:       Subdirectories which should be recursed                      #
# PASSFLAGS:     Variable settings that are passed to recursed Makefiles      #
# MAKELEVEL:     Level of Makefile being run (automatic)                      #
# CURDIR:        Current Makefile directory (automatic)                       #
# DISTDIR:       Temporary directory for file copies & distribution.          #
# TARDIR:        Same as DISTDIR but set relative to 1st Makefile directory.  #
# force:         Required target for use of this makefile                     #
# distdir:       Target that sets up temp dir. DISTDIR & cosmetic output      #
# killdos:       Target that removes DOS line feeds from files in DISTFILES   #
# copyall:       Target which copies files DISTFILES to temp dir. DISTDIR.    #
# distzip:       Target that makes a PC zip file from temp. directory TARDIR. #
# disttar:       Target which makes a tar file from temp. directory TARDIR.   #
#             $(M(TARPGM=tar pgm, TARFLGS=tar pgm flags, TARFILE=tar file)    #
# distgzip:      Target which makes a gz file from tar file.                  #
# deleteall:     Target which deletes temp. directory DISTDIR & all its files #
#                                                                             #
###############################################################################

include ${MAINMAKEDIR}/Distribute

###############################################################################
#                                                                             #
#                               File Updates                                  #
#                         (May Be Called Directly)                            #
#                                                                             #
# This included Makefile contains targets that will update all files in this  #
# directory and all of its subdirectoris. The files that will be updated are  #
# UPDATEFILES and the subdirectories recuresed are DISTSUBDIRS. Any targets,  #
# patterns, rules that update individual files or file types must be          #
# specified elsewhere.                                                        #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
#   update: Update all files in UPDATEFILES & recurse makefiles in            #
#           DISTSUBDIRS.                                                      #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# MAKE:          Make program being used (automatic)                          #
# NPD:           No print directory directive (--no-print-directory)          #
# UPDATEFILES:   Files that should be updated                                 #
# UPDATEDIRS:    Subdirectories which should be recursed                      #
# PASSFLAGS:     Variable settings that are passed to recursed Makefiles      #
#                                                                             #
###############################################################################

include ${MAINMAKEDIR}/Update

###############################################################################
#                                                                             #
#                         DOS LineEnding Adjustment                           #
#                         (May Be Called Directly)                            #
#                                                                             #
# This included Makefile contains targets for removing ^M from all files      #
# specified. This is normally invoked when any files from the source module   #
# are distributed. It will clean all files in variable DISTFILES in the       #
# directory that the Makefile is invoked in (CURDIR)                          #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
#   killdos:    Clean all files defined in MODDISTFILES                       #
#                                                                             #
# * Target killdos is the target one should typically use.                    #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# DOSCLEANFILES:  All files that will be distributed with the module.         #
# force:          Required target for use of this makefile                    #
#                                                                             #
###############################################################################

include ${MAINMAKEDIR}/DieDOSDie

###############################################################################
#                                                                             #
#                               File Copying                                  #
#                       (Should NOT Be Called Directly)                       #
#                                                                             #
# This included Makefile contains targets for copying distributed files from  #
# one location to another. The files to be copied are listed in the variable  #
# DISTFILES & assumed in the current directory CURDIR. They will be copied to #
# the directory specified by DISTDIR. Additionally, there is a target for     #
# removing the directory DISTDIR and all files it contains. Note that the     #
# targets copyall and showcopy DO NOT RECURSE at all, but deleteall DOES.     #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
#   copyall:    Copy all files in DISTFILES in CURDIR to directory DISTDIR    #
#   deleteall:  Delete all files from DISTDIR (recursively, remove DISTDIR)   #
#   showcopy:   Show how copying is to be performed (but take no action)      #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# CURDIR:        Directory containing files to be copied.                     #
# DISTFILES:     Files in this directory to copy.                             #
# DISTDIR:       Directory name where copies will be put                      #
# force:         Required target for use of this makefile                     #
#                                                                             #
# Note: The Directory DISTDIR MUST EXIST prior to calling target copyall.     #
#       The task of producing this directory is usually done by whatever      #
#       target is producing a GAMMA distribution.                             #
#                                                                             #
###############################################################################

include ${MAINMAKEDIR}/CopyDelDir

###############################################################################
#                                                                             #
#                              File Archiving                                 #
#                       (Should NOT Be Called Directly)                       #
#                                                                             #
# These targets are involved with making a compressed file from a specified   #
# directory.                                                                  #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
#   tardir:    Produce tar file TARFILE of directory TARDIR using TARPGM      #
#   gziptar:   Product gz file from TARFILE using GZIPPGM                     #
#   zipdir:    Produce zip file ZIPFILE of directory TARDIR using ZIPPGM      #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# TARDIR         Directory to archive with tar (or zip on DOS).               #
# TARPGM         Tar program to use.                                          #
# TARFLGS        Tar program flags to use.                                    #
# TARFILE        Tar file to make.                                            #
# GZIPPGM        Unix compression program (usually gzip)                      #
# GZIPFLGS       Unix compression program flags (usually nothing)             #
# GZIPILE        Zip (gz) file name                                           #
# ZIPPGM         PC compression program (zip in unix or pkzip in windows)     #
# ZIPFLGS        PC compression program flags (-p -r for pkzip)               #
# ZIPILE         Zip (zip) file name                                          #
# CURDIR:        Directory containing files to be copied.                     #
# force:         Required target for use of this makefile                     #
#                                                                             #
# Note that TARDIR should be a local name (Makefile relative) of the temp.    #
# distribution directory DISTDIR. This is so that any untar or unzip commands #
# will output files beginnng a the base directory of a GAMMA version, not the #
# base directory of where GAMMA is stored on the system running the make      #
# commands. In constrast, DISTDIR likely contains a full path directory name. #
#                                                                             #
###############################################################################

include ${MAINMAKEDIR}/TarZipDir

###############################################################################
#          Section To Make Targets Specific For a Full Distribution           #
###############################################################################

disttar:  TARFILE = ${GVERDIR}.{$MODLABEL}dist.tar
disttar:  tardir
distgzip: TARFILE  = ${GVERDIR}.{$MODLABEL}dist.tar
distgzip: GZIPFILE = ${GVERDIR}.{$MODLABEL}dist.tar.gz
distgzip: gziptar
distzip:  ZIPFILE = ${GVERDIR}.{$MODLABEL}dist.zip
distzip:  zipdir

###############################################################################
#          Section To Make Targets Specific For Source Distributions          #
###############################################################################

srctar:  TARFILE = ${GVERDIR}.{$MODLABEL}src.tar
srctar:  tardir
srcgzip: TARFILE  = ${GVERDIR}.{$MODLABEL}src.tar
srcgzip: GZIPFILE = ${GVERDIR}.{$MODLABEL}src.tar.gz
srcgzip: gziptar
srczip:  ZIPFILE = ${GVERDIR}.{$MODLABEL}src.zip
srczip:  zipdir

###############################################################################
#          Section To Make Targets Specific For Header Distributions          #
###############################################################################

hdrtar:  TARFILE = ${GVERDIR}.{$MODLABEL}hdr.tar
hdrtar:  tardir
hdrgzip: TARFILE  = ${GVERDIR}.{$MODLABEL}hdr.tar
hdrgzip: GZIPFILE = ${GVERDIR}.{$MODLABEL}hdr.tar.gz
hdrgzip: gziptar
hdrzip:  ZIPFILE = ${GVERDIR}.{$MODLABEL}hdr.zip
hdrzip:  zipdir

###############################################################################
#                                                                             #
#                          Directory File Cleanup                             #
#                         (May Be Called Directly)                            #
#                                                                             #
# This included Makefile contains a target which should remove all non-GAMMA  #
# files from this directory. These are any files that may have been placed    #
# into this directory (by accident or otherwise) but are not needed. They     #
# just clutter things up and take up disk space.			      #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
#   cleandir:   Clean all spurious files from this directory.                 #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# MODLABEL:      Cosmetic label for the source module.                        #
# MODULEDIR:     Directory name of the source module.                         #
# force:         Required target for use of this makefile                     #
#                                                                             #
###############################################################################

include ${SRCMAKEDIR}/CleanDir

###############################################################################
#                                                                             #
#                             Variable Checking                               #
#                         (May Be Called Directly)                            #
#                                                                             #
# This included Makefile contains targets for looking at variables defined in #
# the makefile itself. This is normally used only to debug the Makefile.      #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
# showvars:   Display all of the relevant Makefile variables                  #
# variables  - Print out the variables used in this module's Makefile         #
# gnuvars    - Output just the boilerplate GNU variables (set in configure)   #
# compvars   - Output just the compiler related variables                     #
# gcntrlvars - Output the GAMMA version control variables                     #
# dirvars    - Output the GAMMA directory variables                           #
# pkgvars    - Output the GAMMA package variables                             #
# srcfiles   - Output a list of module source (.cc) files                     #
# hdrfiles   - Output a list of module header (.h) files                      #
# objfiles   - Output a list of module object files                           #
#                                                                             #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# NPD:           No print directory directive.                                #
# MODLABEL:      Cosmetic label for the source module.                        #
# MODULEDIR:     Directory name of the source module.                         #
# MODDISTFILES:  All files that will be distributed with the module.          #
# MODSRCFILES:   Source files that will be distributed with the module.       #
# MODHDRFILES:   Header files that will be distributed with the module.       #
# force:         Required target for use of this makefile                     #
#                                                                             #
#                                                                             #
# Note that variables will output {gnu,comp,gcntrl,dir,pkg}vars as well.      #
#                                                                             #
###############################################################################

include ${SRCMAKEDIR}/Variables

