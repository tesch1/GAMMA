###############################################################################
#                                                                             #
#                                 G A M M A                                   #
#           Source Module Makefile For The GAMMA MR Simulation Platform       #
#                      Copyright © 2002 Scott A. Smith                        #
#                  National High Magnetic Field Laboratory                    #
#                         1800 E. Paul Dirac Drive                            #
#                     Tallahassee, FL, USA 32307-4005                         #
#                          ssmith@magnet.fsu.edu                              #
#                      On WWW See gamma.magnet.fsu.edu                        #
#                                                                             #
# The concern of this Makefile, TarZip, is the making of archive files for    #
# various GAMMA distributions. These targets handle production of .tar, .zip, #
# and .tar.gz files.                                                          #
#                                                                             #
# =========================================================================== #
#                                                                             #
# Quick Info: 1.) Generic Makefile To Archive A Directory (tar, gzip, zip.).  #
#             2.) Directory TARDIR will be archived (from CURDIR)             #
#             3.) For Tar Set: TARPGM, TARFLGS, TARFILE.                      #
#             4.) For Uniz Zip Set: GZIPPGM, GZIPFLGS, GZIPILE                #
#             5.) For DOSZip Set: ZIPPGM, ZIPFLGS, ZIPILE                     #
#             6.) TARDIR should be a local name (Makefile relative) of the    #
#                 temporary distribution directory DISTDIR. This is so that   #
#                 any untar or unzip command begin a the base directory of a  #
#                 GAMMA version, not the base directory of where GAMMA is     #
#                 stored on the system running make commands.                 #
#                                                                             #
# =========================================================================== #
#                                                                             #
# Target tardir will take the specified directory (TARDIR) and use the spec-  #
# ified tar program and flags (TARPGM, TARFLGS) to make an archive of the     #
# directory (TARDIR). The archive name will be TARFILE and exist in the       #
# current directory CURDIR. The directory structure (with subdirectories)     #
# is preserved and indentical to that for GAMMA.                              #
#                                                                             #
# Target gziptar will take the specified tar file (TARFILE) in the current    #
# directory (CURDIR) and attempt to compress it using the program (GZIPPGM)   #
# and program flags (GZIPFLGS). The resulting compressed file will be named   #
# GZIPFILE and exist in the current directory (CURDIR). Since this scheme     #
# compresses a tar file, the compression program is typically gzip (GNU zip)  #
#                                                                             #
# Target zipdir will take the specified directory (TARDIR) and use the spec-  #
# ified zip compression program and flags (ZIPPGM, ZIPFLGS) to make a zipped  #
# archive of the directory (TARDIR). The zipped archive name will be ZIPFILE  #
# and exist in the current directory CURDIR. Since this scheme stores and     #
# compresses multiple files into a zipped archive, the compression program is #
# typically one that is PC like (pkzip Windows/zip Unix).  The zip files will #
# preserve the directory structure (with subdirectories) and that will be     #
# indentical to what is used for GAMMA.                                       #
#                                                                             #
# Users are free to copy this file for personal use but may NOT give out      #
# modifications with or without the GAMMA platform.                           #
#                                                                             #
# Supplied Targets                                                            #
# ================                                                            #
#                                                                             #
#   tardir:    Produce tar file TARFILE of directory TARDIR using TARPGM      #
#   gziptar:   Product gz file from TARFILE using GZIPPGM                     #
#   zipdir:    Produce zip file ZIPFILE of directory DISTIR using ZIPPGM      #
#                                                                             #
# Requirements                                                                #
# ============                                                                #
# TARDIR         Directory to archive with tar (or zip on DOS).               #
# TARPGM         Tar program to use.                                          #
# TARFLGS        Tar program flags to use.                                    #
# TARFILE        Tar file to make.                                            #
# GZIPPGM        Unix compression program (usually gzip)                      #
# GZIPFLGS       Unix compression program flags (usually nothing)             #
# GZIPILE        Zip (gz) file name                                           #
# ZIPPGM         PC compression program (zip in unix or pkzip in windows)     #
# ZIPFLGS        PC compression program flags (-p -r for pkzip)               #
# ZIPILE         Zip (zip) file name                                          #
# CURDIR:        Directory containing files to be copied (automatic).         #
# force:         Required target for use of this makefile                     #
#                                                                             #
# Note: The files to be tarred and archived must exist in the directory named #
#       TARDIR prior to calling any of these targets.                         #
#                                                                             #
###############################################################################

tardir: 
	@echo " * Generating Tar File From Directory $(TARDIR)"
	@if (test -f ${TARFILE}) \
	then \
	  echo "   First Deleting Existing Tar File $(TARFILE)"; \
          rm -f $(TARFILE); \
	fi
	@echo "   Making New TarFile Named $(TARFILE)"
	@$(TARPGM) $(TARFLGS) $(TARFILE) $(TARDIR)
	@echo "   ..........Complete!"
	@echo "   The New Tar File Is $(TARFILE)"
	@echo "   It Resides In Directory ${CURDIR}"

gziptar: 
	@echo
	@echo " * Compressing Tar File $(TARFILE) With $(GZIPPGM)"
	@if (test -f $(GZIPFILE) ) \
	then \
	  echo "   First Deleting Existing Zip File $(GZIPFILE)"; \
          rm -f $(GZIPFILE); \
	fi
	@echo "   Making New Zip File Named $(GZIPFILE)"
	@$(GZIPPGM) $(GZIPFLGS) $(TARFILE)
	@echo "   ..........Complete!"
	@echo "   The New Zipped File Is $(GZIPFILE)"
	@echo "   It Resides In Directory ${CURDIR}"
	
zipdir: 
	@echo " * Generating DOS Zipped File From Directory ${TARDIR}"
	@if (test -f $(ZIPFILE) ) \
	then \
	  echo "   First Deleting Existing Zip File $(ZIPFILE)"; \
          rm -f $(ZIPFILE); \
	fi
	@echo "   Directory $(TARDIR) Will Be Compressed With $(ZIPPGM)"
	@$(ZIPPGM) $(ZIPFLGS) $(ZIPFILE) $(TARDIR)
	@echo "   ..........Complete!"
	@echo "   The New DOS Zipped File Is $(ZIPFILE)"
	@echo "   It Resides In Directory ${CURDIR}"

showtar:
	@echo "	Tar File To Produce (TARFILE):                 ${TARFILE}"
	@echo "	Tar Program To Use (TARPGM):                   ${TARPGM}"
	@echo "	Tar Program Flags To Use (TARFLGS):            ${TARFLGS}"
	@echo "	Directory To Archive With Tar (TARDIR):        ${TARDIR}"
	@echo "	Starting Directory For Tar (CURDIR):           ${CURDIR}"

showgzip:
	@echo "	TarZip File To Produce (GZIPFILE):             ${GZIPFILE}"
	@echo "	Compression Program To Use (GZIPPGM):          ${GZIPPGM}"
	@echo "	Compression Program Flags To Use (GZIPFLGS):   ${GZIPFLGS}"
	@echo "	Directory For Tar And Zip (CURDIR):            ${CURDIR}"

showzip:
	@echo "	DOS Zip File To Produce (ZIPFILE):             ${ZIPFILE}"
	@echo "	Zip Program To Use (ZIPPGM):                   ${ZIPPGM}"
	@echo "	Zip Program Flags To Use (ZIPFLGS):            ${ZIPFLGS}"
	@echo "	Directory To Archive With Zip (TARDIR):        ${TARDIR}"
	@echo "	Starting Directory For Zip (CURDIR):           ${CURDIR}"



